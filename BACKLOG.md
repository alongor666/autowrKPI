# 📋 需求与任务待办清单 (BACKLOG)

> **用途**: 记录所有需求与任务的完整生命周期
> **更新时间**: 2026-01-02
> **维护规则**: 所有新需求必须先在此登记；状态变更必须同步更新

---

## 📖 使用指南

### 状态机定义（必须遵循）

```
PROPOSED     → 需求提出，待评审
TRIAGED      → 已评审，已排优先级，待开始
IN_PROGRESS  → 进行中
BLOCKED      → 阻塞（需外部输入或决策）
DONE         → 已完成（必须有证据）
DEPRECATED   → 已废弃（需说明原因）
```

### DONE判定规则（缺一不可）

任何任务标记为 **DONE** 必须同时满足：

1. ✅ **关联文档路径**：必填
2. ✅ **关联代码路径**：涉及代码则必填，纯文档任务可标记 `N/A`
3. ✅ **验收/证据**：必填（PR链接 / commit哈希 / 对比报告路径 / 截图路径等至少一种）

**⚠️ 警告**: 不满足以上规则的DONE条目会被校验脚本自动拦截。

---

## 📊 待办清单

### 优先级说明
- **P0**: 紧急且重要（阻塞发布）
- **P1**: 重要（当前迭代必须完成）
- **P2**: 中等（下一迭代）
- **P3**: 较低（待排期）

---

### 需求表格

| ID | 提出时间 | 板块 | 归属对象 | 需求描述 | 优先级 | 状态 | 关联文档 | 关联代码 | 验收/证据 |
|----|---------|------|---------|---------|--------|------|---------|---------|----------|
| GOV-001 | 2026-01-02 | 治理框架 | @claude | 建立索引一致性+需求账本+DONE证据链+校验机制 | P0 | IN_PROGRESS | /开发文档/00_index/ | /scripts/check-governance.mjs | - |
| EXAMPLE-001 | 2025-12-18 | 经营概览 | @team | 优化KPI卡片加载性能（示例） | P1 | DONE | /开发文档/reports/IMPLEMENTATION_20251218.md | js/dashboard.js:82-106 | commit:46a8a1c |
| EXAMPLE-002 | 2025-12-19 | 筛选器 | - | 修复下钻筛选器重置Bug（示例） | P2 | TRIAGED | - | - | - |
| EXAMPLE-003 | 2025-12-20 | 指标体系 | - | 新增"客户分层"维度（示例） | P2 | BLOCKED | - | - | 等待业务方确认口径 |

---

## 📝 填写模板

### 新增需求（复制此模板）

```markdown
| REQ-XXX | YYYY-MM-DD | [板块名称] | - | [简短清晰的需求描述] | P1 | PROPOSED | - | - | - |
```

**示例**:
```markdown
| REQ-010 | 2026-01-02 | 经营概览 | - | 添加保费趋势预测曲线 | P1 | PROPOSED | - | - | - |
```

---

### 完成任务（填写证据）

**变更前**:
```markdown
| REQ-010 | 2026-01-02 | 经营概览 | @alice | 添加保费趋势预测曲线 | P1 | IN_PROGRESS | - | - | - |
```

**变更后**:
```markdown
| REQ-010 | 2026-01-02 | 经营概览 | @alice | 添加保费趋势预测曲线 | P1 | DONE | /开发文档/reports/FORECAST_IMPL.md | js/dashboard.js:700-750 | PR#123 |
```

---

## 🔍 查询指南

### 按状态查询
- **进行中的任务**: 搜索 `IN_PROGRESS`
- **已完成的任务**: 搜索 `DONE`
- **阻塞的任务**: 搜索 `BLOCKED`

### 按人员查询
- 搜索"归属对象"列：`@alice` 或 `@bob`

### 按板块查询
- 搜索"板块"列：`经营概览` 或 `筛选器`

### 按优先级查询
- 搜索"优先级"列：`P0` 或 `P1`

---

## 🔄 维护协议

### 必须更新的场景
1. **新需求提出**：添加新行，状态为 `PROPOSED`
2. **评审完成**：更新状态为 `TRIAGED`，填写优先级
3. **开始工作**：更新状态为 `IN_PROGRESS`，填写归属对象
4. **遇到阻塞**：更新状态为 `BLOCKED`，在备注或验收/证据列说明阻塞原因
5. **任务完成**：更新状态为 `DONE`，填写关联文档、关联代码、验收/证据
6. **需求废弃**：更新状态为 `DEPRECATED`，在验收/证据列说明废弃原因

### 自动化校验
- **脚本**: `scripts/check-governance.mjs`
- **规则**: 检查所有DONE状态的任务是否填写了关联文档、关联代码、验收/证据
- **触发**: 手动运行 `node scripts/check-governance.mjs` 或通过Git hook

---

## 📌 注意事项

- **禁止删除历史记录**：已完成或已废弃的任务不可删除，保留历史
- **禁止跳跃状态**：状态必须按状态机顺序转换
- **强制证据链**：DONE状态必须有完整证据，否则校验不通过
- **ID唯一性**：每个任务ID必须唯一，建议格式 `[类别]-[序号]`（如 `REQ-001`, `BUG-001`, `GOV-001`）

---

**最后更新**: 2026-01-02
**维护者**: autowrKPI Governance Team

**相关文档**:
- [PROGRESS.md](./PROGRESS.md) - 进展日志与里程碑
- [PROGRESS_INDEX.md](./开发文档/00_index/PROGRESS_INDEX.md) - 进展索引
