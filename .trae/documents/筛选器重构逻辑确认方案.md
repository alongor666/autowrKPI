# 筛选器重构与级联逻辑方案

## 1. UI 文本映射 (UI Mapping)
我们将实现一个全局映射机制，统一处理按钮显示和下拉列表显示：
*   **`energy_type`**:
    *   `true` / `"true"` / `"1"` ➔ **新能源**
    *   `false` / `"false"` / `"0"` ➔ **燃油**
*   **`is_transferred_vehicle`**:
    *   `true` / `"true"` / `"1"` ➔ **过户**
    *   `false` / `"false"` / `"0"` ➔ **非过户**

## 2. 级联锁定逻辑 (Cascading Logic)
我们将监听 **业务类型 (`ui_short_label`)** 的选择变化，并对下游筛选器应用**取交集**规则：

### 规则 A: 续保状态 (`renewal_status`)
*   **触发条件**: 当前选中的业务类型列表。
*   **逻辑**:
    *   如果选中项**全部包含** "新" (e.g. `非营客-新`, `非营客-新能源`):
        ➔ **锁定** `renewal_status` 为 `['新保']`，禁用其他选项。
    *   如果选中项**全部包含** "旧" 或 "过户":
        ➔ **锁定** `renewal_status` 排除 `['新保']` (即只能选 续保/转保)，禁用 `新保`。
    *   如果选中项**混合** (既有新又有旧) 或 **未选**:
        ➔ **不锁定**，开放所有选项。

### 规则 B: 是否过户 (`is_transferred_vehicle`)
*   **触发条件**: 当前选中的业务类型列表。
*   **逻辑**:
    *   如果选中项**全部包含** "过户":
        ➔ **锁定** `is_transferred_vehicle` 为 `['true']` (过户)，禁用 `false`。
    *   如果选中项**全部不含** "过户" (且选了值):
        ➔ **锁定** `is_transferred_vehicle` 为 `['false']` (非过户)，禁用 `true`。*(需确认：非过户业务类型是否绝对不包含过户车？如果是，则锁定；否则仅由用户自由选择)*
    *   如果选中项**混合** 或 **未选**:
        ➔ **不锁定**。

## 3. 排序与布局 (Sorting & Layout)
*   **终端来源置顶**: 加载下拉列表时，检测到 "0110融合销售" 强制置于列表首位。
*   **动态按钮排序**:
    *   **策略**: 每次**应用筛选(Apply)**后，重新渲染按钮顺序。
    *   **顺序规则**: `[已筛选维度...]` + `[未筛选维度(按默认关联度排序)...]`
    *   **默认关联度**:
        1. 机构
        2. 业务类型
        3. 险别组合
        4. (关联) 新能源, 过户, 续保, 车险分...
        5. 终端来源

## 4. 按钮移除
*   删除顶部的蓝色“应用筛选”按钮。
*   保留白色的“重置”按钮，并将其移动到更合适的位置（如筛选栏最右侧）。

## 待确认问题
1.  **关于动态排序的跳变**: 每次点击“确定”后，按钮位置会发生变化（已选的跑到最左边）。这可能导致用户想修改刚选的条件时发现按钮“跑了”。
    *   *建议*: 采用**固定分组排序**（重要维度在前，次要维度在后），而不根据是否选中动态改变位置。
    *   *您的要求*: "把已筛选的放前面"。
    *   *方案*: 我将严格执行您的要求，实现动态重排。

请确认以上逻辑细节，确认后立即执行。