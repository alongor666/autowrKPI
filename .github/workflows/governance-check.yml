name: æ²»ç†ä¸€è‡´æ€§æ ¡éªŒ (Governance Check)

on:
  pull_request:
    branches: [ main, master, develop ]
  push:
    branches: [ main, master, develop ]
    paths:
      - 'BACKLOG.md'
      - 'PROGRESS.md'
      - 'CLAUDE.md'
      - 'AGENT.md'
      - 'å¼€å‘æ–‡æ¡£/**'
      - 'js/**'
      - 'reference/**'
      - 'scripts/check-governance.mjs'

jobs:
  governance-check:
    runs-on: ubuntu-latest
    name: æ£€æŸ¥æ²»ç†è§„åˆ™

    steps:
      - name: ğŸ“¥ æ£€å‡ºä»£ç 
        uses: actions/checkout@v3

      - name: ğŸ”§ è®¾ç½®Node.jsç¯å¢ƒ
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: ğŸ” è¿è¡Œæ²»ç†ä¸€è‡´æ€§æ ¡éªŒ
        run: |
          echo "å¼€å§‹æ²»ç†ä¸€è‡´æ€§æ ¡éªŒ..."
          node scripts/check-governance.mjs

      - name: âœ… æ ¡éªŒé€šè¿‡
        if: success()
        run: |
          echo "::notice::æ²»ç†è§„åˆ™æ ¡éªŒé€šè¿‡ï¼"

      - name: âŒ æ ¡éªŒå¤±è´¥
        if: failure()
        run: |
          echo "::error::æ²»ç†è§„åˆ™æ ¡éªŒå¤±è´¥ï¼Œè¯·ä¿®å¤ä¸Šè¿°é”™è¯¯åå†æäº¤ã€‚"
          exit 1
